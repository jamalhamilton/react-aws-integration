(this.webpackJsonpidcompare=this.webpackJsonpidcompare||[]).push([[0],{137:function(e,t,a){e.exports=a(598)},142:function(e,t,a){},147:function(e,t,a){},598:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),i=a.n(o),l=(a(142),a(135)),c=a(10),s=a(11),u=a(612),d=a(610),m=a(21),h=a(22),p=a(24),f=a(23),g=a(601),y=a(602),E=a(128),v=a(603),b=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this)).state={},n}return Object(h.a)(a,[{key:"goBack",value:function(){window.location.href="/submit"}},{key:"render",value:function(){return r.a.createElement(s.a,null,r.a.createElement(g.a,{style:{textAlign:"center"}},r.a.createElement("div",null,r.a.createElement(y.a,{style:{marginTop:150}},r.a.createElement(E.a,null,r.a.createElement("h2",null,"That info has been received and email has been sent to candidate. You can invite another candidate."))),r.a.createElement(y.a,{style:{marginTop:15}},r.a.createElement(E.a,null,r.a.createElement(v.a,{variant:"primary",onClick:this.goBack},"Go Back"))))))}}]),a}(r.a.Component),k=Object(c.j)(b),j=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this)).state={},n}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement(s.a,null,r.a.createElement(g.a,{style:{textAlign:"center"}},r.a.createElement("div",null,r.a.createElement(y.a,{style:{marginTop:150}},r.a.createElement(E.a,null,r.a.createElement("h2",null,"You uploaded your ID photo successfully!"))))))}}]),a}(r.a.Component),S=Object(c.j)(j),w=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this)).state={},n}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement(s.a,null,r.a.createElement("img",{className:"landing-img",src:"/comingsoon.png"}))}}]),a}(r.a.Component),C=Object(c.j)(w),O=(a(147),a(148),a(25)),_=a(609),T=a(611),I="https://interverify.co",P="34d614b8c18543abd81f338aaeb7b0de",x={siteUrl:I,idme:{cliendId:P,clientSecret:"949e15f3b1dace8c2a3c685032d4e28d",redirectUrl:"https://interverify.co/idme_code",authEndPoint:"https://api.id.me/oauth/authorize?client_id="+P+"&redirect_uri=https://interverify.co/idme_code&response_type=token&scope=loa3"},aws:{accessKey:"AKIAVJKPVCLEKM2YG33J",secretKey:"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",region:"us-east-2",bucket:"idauth"},api:{verifyID:"/verifyID",getUser:"/api/getUser",registerUser:"/api/registerUser",sendMail:"/api/sendMail",sendResultMail:"/api/sendResultMail",updateUserInfo:"/api/updateUserInfo",adminLogin:"/api/admin/login",adminGetAllUsers:"/api/admin/getAllUsers",adminDeleteUser:"/api/admin/deleteUser",adminUpdate:"/api/admin/updateUser",getPhotoId:"/api/vouchedVerification"},vouched_PUBLIC_KEY:"V~F_e~g0ySKtaos#PX.I9Vo4P*1Kxh"},U=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={userInfo:{candidate_name_first:"",candidate_name_last:"",candidate_email:"",date_of_interview:"",social_link:"",interviewer_name_first:"",interviewer_name_last:"",interviewer_email:""},isUploading:!1},e.registerUserData=e.registerUserData.bind(Object(O.a)(e)),e.handleChange=e.handleChange.bind(Object(O.a)(e)),e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){console.log(x.api.getUsers)}},{key:"registerUserData",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.userInfo,r=a.isUploading;console.log("------ userInfo: ",n),r||(this.setState({isUploading:!0}),fetch(x.api.registerUser,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){e.status?fetch(x.api.sendMail,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:e.token})}).then((function(){t.setState({isUploading:!1}),window.location.href="/success"})):t.setState({isUploading:!1}),console.log("data",e.data)})))}},{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value,n=this.state.userInfo;n[t]=a,this.state.userInfo=n}},{key:"render",value:function(){return r.a.createElement(g.a,{style:{textAlign:"center"}},r.a.createElement("div",null,r.a.createElement(y.a,{style:{marginTop:50}},r.a.createElement(E.a,null,r.a.createElement("h1",null,"Step 1. Register New User"))),r.a.createElement(T.a,null),r.a.createElement(_.a,{style:{textAlign:"left"}},r.a.createElement(y.a,{style:{marginTop:30}},r.a.createElement(_.a.Group,{as:E.a,onChange:this.handleChange},r.a.createElement(_.a.Label,null,"Candidate Name"),r.a.createElement(_.a.Control,{type:"text",placeholder:"",name:"candidate_name_first"}),r.a.createElement(_.a.Text,{className:"text-muted"},"First Name")),r.a.createElement(_.a.Group,{as:E.a,onChange:this.handleChange},r.a.createElement(_.a.Label,null,"\xa0"),r.a.createElement(_.a.Control,{type:"text",placeholder:"",name:"candidate_name_last"}),r.a.createElement(_.a.Text,{className:"text-muted"},"Last Name"))),r.a.createElement(y.a,null,r.a.createElement(_.a.Group,{as:E.a,onChange:this.handleChange},r.a.createElement(_.a.Label,null,"Candidate Email"),r.a.createElement(_.a.Control,{type:"email",placeholder:"",name:"candidate_email"}),r.a.createElement(_.a.Text,{className:"text-muted"},"example@example.com")),r.a.createElement(E.a,null)),r.a.createElement(y.a,null,r.a.createElement(_.a.Group,{as:E.a,onChange:this.handleChange},r.a.createElement(_.a.Label,null,"Date Of Interview"),r.a.createElement(_.a.Control,{type:"date",placeholder:"",dateformat:"YYYY-MM-DD",name:"date_of_interview"}),r.a.createElement(_.a.Text,{className:"text-muted"},"Date")),r.a.createElement(E.a,null)),r.a.createElement(y.a,null,r.a.createElement(_.a.Group,{as:E.a,onChange:this.handleChange},r.a.createElement(_.a.Label,null,"Zoom, Skype, Bluejeans, Hirevue link"),r.a.createElement(_.a.Control,{type:"text",placeholder:"",name:"social_link"}),r.a.createElement(_.a.Text,{className:"text-muted"},"http://www.zoom.us/1234567890")),r.a.createElement(E.a,null)),r.a.createElement(y.a,null,r.a.createElement(_.a.Group,{as:E.a,onChange:this.handleChange},r.a.createElement(_.a.Label,null,"Interviewer's Name"),r.a.createElement(_.a.Control,{type:"text",placeholder:"",name:"interviewer_name_first"}),r.a.createElement(_.a.Text,{className:"text-muted"},"First Name")),r.a.createElement(_.a.Group,{as:E.a,onChange:this.handleChange},r.a.createElement(_.a.Label,null,"\xa0"),r.a.createElement(_.a.Control,{type:"text",placeholder:"",name:"interviewer_name_last"}),r.a.createElement(_.a.Text,{className:"text-muted"},"Last Name"))),r.a.createElement(y.a,null,r.a.createElement(_.a.Group,{as:E.a,onChange:this.handleChange},r.a.createElement(_.a.Label,null,"Interviewer's Email"),r.a.createElement(_.a.Control,{type:"email",placeholder:"",name:"interviewer_email"}),r.a.createElement(_.a.Text,{className:"text-muted"},"example@example.com")),r.a.createElement(E.a,null)),r.a.createElement(T.a,null),r.a.createElement(y.a,{style:{marginTop:30,marginBottom:30,textAlign:"center"}},r.a.createElement(E.a,null,r.a.createElement(v.a,{variant:"primary",type:"submit",onClick:this.registerUserData},this.state.isUploading?"Uploading...":"Submit"))))))}}]),a}(r.a.Component),A=a(79),L=a.n(A),N=a(132),B=a(8),D=a(608),V=a(604),F=a(605),M=a(606),K=a(607),R=Object(c.j)((function(){var e=Object(n.useState)([]),t=Object(B.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(),l=Object(B.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(),h=Object(B.a)(m,2),p=h[0],f=h[1],g=Object(n.useState)(),y=Object(B.a)(g,2),E=y[0],b=y[1],k=Object(n.useState)(),j=Object(B.a)(k,2),S=j[0],w=j[1],C=Object(c.g)();Object(n.useEffect)((function(){O()}),[]);var O=function(){var e=Object(N.a)(L.a.mark((function e(){var t,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("authToken"))){e.next=17;break}return e.prev=2,d(!0),e.next=6,fetch(x.api.adminGetAllUsers,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},method:"GET"}).then((function(e){return e.json()}));case 6:a=e.sent,d(!1),a&&a.data&&a.data.length?o(a.data):f("Sorry!, No records found!"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),f("Sorry!, Got issue on loading the records"),d(!1);case 15:e.next=18;break;case 17:C.push("/login");case 18:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),_=function(){b(!1);var e=localStorage.getItem("authToken");e?(d(!0),fetch(x.api.adminDeleteUser,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},method:"POST",body:JSON.stringify({id:a[S].id,token:a[S].token})}).then((function(e){return e.json()})).then((function(e){if(d(!1),e.success){var t=a;t.splice(S,1),o(t),w(void 0),a&&a.length||f("Sorry!, No records found!")}else f(e.message?e.message:"Issue on deleting user")})).catch((function(e){d(!1),f("Issue on deleting! ",e)}))):C.push("/login")};return r.a.createElement(s.a,null,u?r.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",textAlign:"center",backgroundColor:"rgba(16, 16, 16, 0.5)",zIndex:999}},r.a.createElement(V.a,{style:{textAlign:"center",marginTop:"30%"},animation:"border"})):null,r.a.createElement(v.a,{style:{margin:10},onClick:function(){return localStorage.removeItem("authToken"),void C.push("/login")}},"Logout"),r.a.createElement(F.a,{style:{tableLayout:"fixed"},striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Candidate First Name"),r.a.createElement("th",null,"Candidate Last Name"),r.a.createElement("th",null,"Candidate Email"),r.a.createElement("th",null,"Photo Verification"),r.a.createElement("th",null,"ID Verification"),r.a.createElement("th",null,"Result Verification"),r.a.createElement("th",null,"Interview Date"),r.a.createElement("th",null,"Social Link"),r.a.createElement("th",null,"Interviewer First Name"),r.a.createElement("th",null,"Interviewer Last Name"),r.a.createElement("th",null,"Interviewer Email"),r.a.createElement("th",null,"Similarity"),r.a.createElement("th",null,"Vouched verification"),r.a.createElement("th",null,"Action"))),p?null:r.a.createElement("tbody",null,a.map((function(e,t){return r.a.createElement("tr",{key:t,style:{lineBreak:"anywhere"}},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.candidate_name_first?e.candidate_name_first:"--"),r.a.createElement("td",null,e.candidate_name_last?e.candidate_name_last:"--"),r.a.createElement("td",null,e.candidate_email?e.candidate_email:"--"),r.a.createElement("td",null,e.verify_photo?e.verify_photo:"--"),r.a.createElement("td",null,e.verify_idcard?e.verify_idcard:"--"),r.a.createElement("td",null,e.verify_result?e.verify_result:"--"),r.a.createElement("td",null,e.date_of_interview?e.date_of_interview:"--"),r.a.createElement("td",null,e.social_link?e.social_link:"--"),r.a.createElement("td",null,e.interviewer_name_first?e.interviewer_name_first:"--"),r.a.createElement("td",null,e.interviewer_name_last?e.interviewer_name_last:"--"),r.a.createElement("td",null,e.interviewer_email?e.interviewer_email:"--"),r.a.createElement("td",null,e.similarity?e.similarity:"--"),r.a.createElement("td",null,e.id_verification_result?e.id_verification_result:"--"),r.a.createElement("td",null,r.a.createElement(M.a,{size:"sm"},r.a.createElement(v.a,{onClick:function(){return C.push("/admin/update/".concat(e.token))}},r.a.createElement("i",{className:"fa fa-pencil-square-o"})),r.a.createElement(v.a,{onClick:function(){return e=t,b(!0),void w(e);var e},variant:"danger"},r.a.createElement("i",{className:"fa fa-trash"})))))})))),p?r.a.createElement(K.a,{style:{marginTop:20},variant:"danger"},p,"!"):null,function(){if(E)return r.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",textAlign:"center",backgroundColor:"rgba(16, 16, 16, 0.5)",zIndex:999}},r.a.createElement(D.a.Dialog,null,r.a.createElement(D.a.Header,null,r.a.createElement(D.a.Title,null,"Delete user!")),r.a.createElement(D.a.Body,null,r.a.createElement("p",null,"Are you sure to remove this user?")),r.a.createElement(D.a.Footer,null,r.a.createElement(v.a,{onClick:function(){return b(!1)},variant:"secondary"},"No"),r.a.createElement(v.a,{onClick:function(){return _()},variant:"danger"},"yes, Delete"))))}())})),J=Object(c.j)((function(){var e=Object(n.useState)(),t=Object(B.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(),l=Object(B.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(),h=Object(B.a)(m,2),p=h[0],f=h[1],b=Object(n.useState)(),k=Object(B.a)(b,2),j=k[0],S=k[1],w=Object(c.g)(),C=function(){S(!0),fetch(x.api.adminLogin,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({userName:a,password:u})}).then((function(e){return e.json()})).then((function(e){S(!1),e.success&&e.token?(localStorage.setItem("authToken",e.token),w.push("/admin")):f(e.message?e.message:"Issue on login")})).catch((function(e){S(!1),f("Issue on login! ",e)}))};return r.a.createElement(s.a,null,r.a.createElement(g.a,{style:{textAlign:"center",backgroundColor:"#ced1c9",padding:30,borderRadius:10}},r.a.createElement(y.a,{className:"justify-content-md-center",style:{marginTop:50}},r.a.createElement(E.a,{xs:!0,lg:"6"},r.a.createElement(_.a,{onSubmit:function(e){e.preventDefault(),!function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(a)?f("Invalid email"):!function(e){return!!e}(u)?f("Issue on password"):(f(null),C())}},r.a.createElement(_.a.Group,{controlId:"formBasicEmail"},r.a.createElement(_.a.Label,null,"Email address"),r.a.createElement(_.a.Control,{type:"email",onChange:function(e){return o(e.target.value)},placeholder:"Enter email"}),r.a.createElement(_.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(_.a.Group,{controlId:"formBasicPassword"},r.a.createElement(_.a.Label,null,"Password"),r.a.createElement(_.a.Control,{type:"password",onChange:function(e){return d(e.target.value)},placeholder:"Password"})),j?r.a.createElement(v.a,{variant:"primary",disabled:!0},r.a.createElement(V.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."):r.a.createElement(v.a,{type:"submit",variant:"primary"},"Submit"),p?r.a.createElement(K.a,{style:{marginTop:20},variant:"danger"},p,"!"):null)))))})),G=a(136),Y=function(){var e=Object(c.i)().id,t=Object(n.useState)(),a=Object(B.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(),u=Object(B.a)(l,2),d=(u[0],u[1]),m=Object(n.useState)(),h=Object(B.a)(m,2),p=h[0],f=h[1],b=Object(n.useState)(),k=Object(B.a)(b,2),j=k[0],S=k[1],w=Object(c.g)();Object(n.useEffect)((function(){O()}),[]);var C=function(e,t){var a=o;a[t]=e,i(a)},O=function(){var t=localStorage.getItem("authToken");t?(f(!0),fetch(x.api.getUser,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},method:"POST",body:JSON.stringify({token:e})}).then((function(e){return e.json()})).then((function(e){f(!1),e&&e.data&&e.data.token?(i(e.data),d(e.data)):S("Issue on loding user or no user found!")})).catch((function(e){f(!1),S("Issue on loding user! ",e)}))):w.push("/login")},T=function(){if(function(e){if(!e)return!1;return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(o.candidate_email)){var e=localStorage.getItem("authToken");e?(f(!0),fetch(x.api.adminUpdate,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},method:"POST",body:JSON.stringify(Object(G.a)({},o))}).then((function(e){return e.json()})).then((function(e){f(!1),e.status?(alert("Updated."),w.push("/admin")):alert(e.message?e.message:"Issue on updating user")})).catch((function(e){f(!1),S("Issue on deleting! ",e)}))):w.push("/login")}else alert("Candidate Email should be valid")};return r.a.createElement(s.a,null,r.a.createElement("p",{onClick:function(){return w.push("/admin")},style:{margin:10,textDecorationLine:"underline",cursor:"pointer"}},"Back to users list"),r.a.createElement(g.a,{style:{textAlign:"center",backgroundColor:"#ced1c9",padding:30,borderRadius:10}},r.a.createElement("h1",null,"update user"),p?r.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",textAlign:"center",backgroundColor:"rgba(16, 16, 16, 0.5)",zIndex:999}},r.a.createElement(V.a,{style:{textAlign:"center",marginTop:"30%"},animation:"border"})):o&&o.token?r.a.createElement(y.a,{className:"justify-content-md-center",style:{marginTop:50}},r.a.createElement(E.a,{xs:!0,lg:"6"},r.a.createElement(_.a,null,r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Candidate First Name"),r.a.createElement(_.a.Control,{defaultValue:o.candidate_name_first,onChange:function(e){return C(e.target.value,"candidate_name_first")}})),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Candidate Last Name"),r.a.createElement(_.a.Control,{defaultValue:o.candidate_name_last,onChange:function(e){return C(e.target.value,"candidate_name_last")}})),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Candidate Email"),r.a.createElement(_.a.Control,{defaultValue:o.candidate_email,onChange:function(e){return C(e.target.value,"candidate_email")}})),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Interviewer First Name"),r.a.createElement(_.a.Control,{defaultValue:o.interviewer_name_first,onChange:function(e){return C(e.target.value,"interviewer_name_first")}})),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Interviewer Last Name"),r.a.createElement(_.a.Control,{defaultValue:o.interviewer_name_last,onChange:function(e){return C(e.target.value,"interviewer_name_last")}})),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Interviewer Email"),r.a.createElement(_.a.Control,{defaultValue:o.interviewer_email,onChange:function(e){return C(e.target.value,"interviewer_email")}})),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Social Link"),r.a.createElement(_.a.Control,{defaultValue:o.social_link,onChange:function(e){return C(e.target.value,"social_link")}})),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Similarity"),r.a.createElement(_.a.Control,{defaultValue:o.similarity,onChange:function(e){return C(e.target.value,"similarity")}})),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Verify Result"),r.a.createElement(_.a.Control,{defaultValue:o.verify_result,onChange:function(e){return C(e.target.value,"verify_result")}})),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Date Of Interview"),r.a.createElement(_.a.Control,{type:"datetime-local",defaultValue:o.date_of_interview,onChange:function(e){return C(e.target.value,"date_of_interview")}})),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Verify Photo"),r.a.createElement(_.a.Control,{defaultValue:o.verify_photo,onChange:function(e){return C(e.target.value,"verify_photo")}})),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Verify IDcard"),r.a.createElement(_.a.Control,{defaultValue:o.verify_idcard,onChange:function(e){return C(e.target.value,"verify_idcard")}})),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Vouched verification"),r.a.createElement(_.a.Control,{defaultValue:o.id_verification_result,onChange:function(e){return C(e.target.value,"id_verification_result")}}))),r.a.createElement(v.a,{style:{margin:10},onClick:function(){return T()},variant:"primary"},"Update"))):null,j?r.a.createElement(K.a,{style:{marginTop:20},variant:"danger"},j,"!"):null))},z=a(13),Q=a.n(z),W=function(){var e=Object(n.useState)(),t=Object(B.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(),l=Object(B.a)(i,2),u=l[0],d=l[1],m=Object(c.g)(),h=Object(n.useState)(),p=Object(B.a)(h,2),f=p[0],E=p[1],v=Object(c.h)().search,b=new URLSearchParams(v).get("token"),k=function(){var e=document.createElement("script");e.src="https://static.vouched.id/widget/vouched.js",e.async=!0,e.onload=function(){window.Vouched({appId:x.vouched_PUBLIC_KEY,crossDevice:!0,crossDeviceQRCode:!0,onSubmit:function(e){var t=e.stage,a=e.attempts,n=e.job;console.log("submit",{stage:t,attempts:a,job:n})},onCamera:function(e){var t=e.hasCamera,a=e.hasPermission;console.log("onCamera",{hasCamera:t,hasPermission:a})},onInit:function(e){e.token,console.log("initialization")},onDone:function(e){console.log(e),j(e)},stepTitles:{FrontId:"Upload ID",Face:"Upload Headshot",Done:"Finished"},content:{cameraButton:"Take a Photo",crossDeviceTitle:"Identity Verification",crossDeviceInstructions:"We need to verify your identity. This requires government-issued photo ID as well as selfie. Please follow the instructions below to continue the verification process on your phone",crossDeviceSuccess:"Verification is complete, continue on your desktop",review:"Verification complete",upperSuccess:"Your photo uploads are complete!",success:"Please close this window to return your online visit.",lowerSuccess:"Thank you.",upperIdInstructions:"Before you start please have an approved Government ID (e.g. Passport / Driving License) in your hand.",lowerIdInstructions:"Please take a photo of your ID now",upperFaceInstructions:"Time to take a photo.",lowerFaceInstructions:"Please take a clear picture of your face, and make sure it does not include:",upperFailure:"Try Again",verifyFail:"Sorry for the inconvenience",lowerFailure:"The photo you shared can't be used for validation. Please take another picture, making sure the image of your face or your ID is clear."},theme:{name:"verbose",font:"Open Sans",fontColor:"#413d3a",iconLabelColor:"#413d3a",bgColor:"#FFF",baseColor:"#62ACDE",navigationDisabledBackground:"#b3def1",navigationDisabledText:"#a3d7ee",navigationActiveText:"#413d3a",iconColor:"#f6f5f3",iconBackground:"#62ACDE"}}).mount("#vouched-element")},document.body.appendChild(e)},j=function(e){if(e){var t=e.errors;t&&t.length?o(t):(alert("ID Verification completed successfully!"),S(e.token))}},S=function(e){d(!0),fetch(x.api.getPhotoId,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({verificationToken:e})}).then((function(e){return e.json()})).then((function(e){d(!1),e&&e.status?w(e.data):alert("Sorry, Verification not compleded!.")})).catch((function(e){alert("Sorry, Verification not compleded!."),d(!1)}))},w=function(e){Q.a.config.update({accessKeyId:x.aws.accessKey,secretAccessKey:x.aws.secretKey,region:x.aws.region});var t=new Q.a.S3({params:{Bucket:x.aws.bucket}}),a=f.id+"_id.jpg",n=new File([e],a),r={Key:n.name,ContentType:"image/jpeg",Body:n};d(!0),t.putObject(r,(function(e,t){d(!1),e?alert(e&&e.message?e.message:"photo upload faild!"):(d(!0),fetch(x.api.updateUserInfo,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:b,verify_idcard:a,id_verification_result:"verified"})}).then((function(e){return e.json()})).then((function(e){d(!1),e.status?m.push("/userphoto?token="+b):alert("Sorry, for the Inconvenience caused by us!. please try again in some time.")})).catch((function(e){d(!1),alert("photo upload faild!")})))}))};Object(n.useEffect)((function(){k(),C()}),[]);var C=function(){d(!0),fetch(x.api.getUser,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:b})}).then((function(e){return e.json()})).then((function(e){d(!1),e&&e.data&&e.data.token?(E(e.data),"verified"==e.data.id_verification_result&&(e.data.verify_result?(alert("All your verification has been completed!."),m.push("/verifisuccess?token="+b)):m.push("/userphoto?token="+b))):alert("Sorry, User not found!.")})).catch((function(e){alert("Sorry, User not found!."),d(!1)}))};return r.a.createElement(s.a,null,r.a.createElement(g.a,{style:{textAlign:"center"}},u?r.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",textAlign:"center",backgroundColor:"rgba(16, 16, 16, 0.5)",zIndex:999}},r.a.createElement(V.a,{style:{textAlign:"center",marginTop:"30%"},animation:"border"})):null,r.a.createElement(y.a,{style:{justifyContent:"center"}},r.a.createElement("ul",{class:"progressbar"},r.a.createElement("li",null,"Identity Verification"),r.a.createElement("li",null,"Photo Verification"),r.a.createElement("li",null,"Verification finished")))),r.a.createElement("div",{style:{marginTop:100}},r.a.createElement("div",{id:"vouched-element"}),r.a.createElement("div",{style:{marginLeft:"40%"}},r.a.createElement("h4",null,"Scan and open the link which is on QR code!."))),a&&a.length?r.a.createElement("div",{style:{marginLeft:"40%",color:"red"}},r.a.createElement("h2",null,"Verification Not completed!"),r.a.createElement("ul",{style:{fontSize:25}},a.map((function(e,t){return r.a.createElement("li",{key:t},e.message)})))):null)},X=a(613),Z=a(36),q=a.n(Z),H={width:1280,height:720,facingMode:"user"},$={width:1280,height:720,facingMode:{exact:"environment"}},ee=function(){var e=Object(n.useState)(),t=Object(B.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(),l=Object(B.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(),h=Object(B.a)(m,2),p=h[0],f=h[1],b=Object(c.g)(),k=Object(n.useState)(),j=Object(B.a)(k,2),S=j[0],w=j[1],C=Object(n.useState)(),O=Object(B.a)(C,2),_=O[0],I=O[1],P=r.a.createRef(),U=Object(c.h)().search,A=new URLSearchParams(U).get("token");Object(n.useEffect)((function(){N();var e=L();"Android"!=e&&"iOS"!=e||(H=$)}),[]);var L=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":/JavaFX/.test(e)?"JavaFx":"unknown"},N=function(){o(!0),fetch(x.api.getUser,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:A})}).then((function(e){return e.json()})).then((function(e){o(!1),e&&e.data&&e.data.token&&(w(e.data),"verified"==e.data.id_verification_result?e.data.verify_result&&(alert("All your verification has been completed!."),b.push("/verifisuccess?token="+A)):b.push("/verifyID?token="+A))})).catch((function(e){o(!1)}))},D=function(){var e=x.aws.bucket,t=S.verify_photo,a=S.verify_idcard;if(t&&a){o(!0),Q.a.config.update({accessKeyId:x.aws.accessKey,secretAccessKey:x.aws.secretKey,region:x.aws.region});var n={SourceImage:{S3Object:{Bucket:e,Name:t}},TargetImage:{S3Object:{Bucket:e,Name:a}},SimilarityThreshold:70};(new Q.a.Rekognition).compareFaces(n,(function(e,t){o(!1),e?alert("You didn't upload exact personal photo."):t.FaceMatches.length?t.FaceMatches.forEach((function(e){var t=e.Similarity;o(!0),fetch(x.api.updateUserInfo,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:A,verify_result:t})}).then((function(e){return e.json()})).then((function(e){o(!1),e.status?fetch(x.api.sendResultMail,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:A,similarity:t})}).then((function(e){return e.json()})).then((function(e){e.status?(alert("verification success!"),b.push("/verifisuccess?token="+A)):alert("Error sending mail!.")})):alert("Error on verification!")})).catch((function(e){o(!1)}))})):alert("User and ID is not matched!")}))}},F=function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r));return new Blob([new Uint8Array(n)],{type:a})};return r.a.createElement(s.a,null,r.a.createElement(g.a,{style:{textAlign:"center"}},a?r.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",textAlign:"center",backgroundColor:"rgba(16, 16, 16, 0.5)",zIndex:999}},r.a.createElement(V.a,{style:{textAlign:"center",marginTop:"30%"},animation:"border"})):null,r.a.createElement(y.a,{style:{justifyContent:"center"}},r.a.createElement("ul",{class:"progressbar"},r.a.createElement("li",{class:"active"},"Identity Verification"),r.a.createElement("li",null,"Photo Verification"),r.a.createElement("li",null,"Verification finished"))),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{style:{marginTop:50}},r.a.createElement(E.a,null,r.a.createElement("h1",null,"Step 2. Verify Your Information"))),r.a.createElement(T.a,null),r.a.createElement(y.a,{style:{marginTop:30}},r.a.createElement(E.a,null,r.a.createElement("h4",null,"Your Face Photo"),p?r.a.createElement("div",null,r.a.createElement(y.a,{style:{justifyContent:"center"}},r.a.createElement("img",{src:u,style:{marginBottom:6,alignSelf:"center",display:"inline-block"}})),r.a.createElement(y.a,{style:{justifyContent:"space-evenly"}},r.a.createElement(v.a,{style:{marginLeft:30,display:"inline-block"},variant:"warning",onClick:function(){return function(){Q.a.config.update({accessKeyId:x.aws.accessKey,secretAccessKey:x.aws.secretKey,region:x.aws.region});var e=new Q.a.S3({params:{Bucket:x.aws.bucket}}),t=F(u),a=S.id+"_face.jpg",n=new File([t],a),r={Key:n.name,ContentType:"image/jpeg",Body:n};I(.1),e.putObject(r,(function(e,t){I(0),e?alert(e&&e.message?e.message:"photo upload faild!"):(o(!0),fetch(x.api.updateUserInfo,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:A,verify_photo:a})}).then((function(e){return e.json()})).then((function(e){o(!1),w(e.data),e.status?(alert("photo uploaded successfully!"),D()):alert("photo upload faild!")})).catch((function(e){o(!1),alert("photo upload faild!")})))})).on("httpUploadProgress",(function(e){var t=parseInt(e.loaded/e.total*100);I(t)}))}()}},"Upload"),r.a.createElement(v.a,{variant:"primary",onClick:function(){return f(!1)}},"Retake Photo"))):r.a.createElement("div",null,r.a.createElement(q.a,{style:{display:"inline-block"},audio:!1,videoConstraints:H,screenshotFormat:"image/jpeg",ref:P}),r.a.createElement("p",null,r.a.createElement(v.a,{variant:"primary",onClick:function(){return function(){if(P&&P.current){var e=P.current.getScreenshot();if(!e)return void alert("Camera is not connected!!");d(e),f(!0)}}()}},"Take A Photo")))))),_>0&&r.a.createElement(X.a,{now:_,label:_+"%",animated:!0})))},te={width:1280,height:720,facingMode:"user"},ae={width:1280,height:720,facingMode:{exact:"environment"}},ne=function(){var e=Object(n.useState)(),t=Object(B.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(),l=Object(B.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(),h=Object(B.a)(m,2),p=h[0],f=h[1],b=Object(c.g)(),k=Object(n.useState)(),j=Object(B.a)(k,2),S=j[0],w=j[1],C=Object(n.useState)(),O=Object(B.a)(C,2),_=O[0],I=O[1],P=r.a.createRef(),U=Object(c.h)().search,A=new URLSearchParams(U).get("token");Object(n.useEffect)((function(){N();var e=L();"Android"!=e&&"iOS"!=e||(te=ae)}),[]);var L=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":/JavaFX/.test(e)?"JavaFx":"unknown"},N=function(){o(!0),fetch(x.api.getUser,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:A})}).then((function(e){return e.json()})).then((function(e){o(!1),e&&e.data&&e.data.token&&(w(e.data),"verified"==e.data.id_verification_result?e.data.verify_result?(alert("All your verification has been completed!."),b.push("/verifisuccess?token="+A)):e.data.verify_photo||b.push("/userphoto?token="+A):b.push("/verifyID?token="+A))})).catch((function(e){o(!1)}))},D=function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r));return new Blob([new Uint8Array(n)],{type:a})},F=function(){var e=x.aws.bucket,t=S.verify_photo,a=S.verify_idcard;if(t&&a){o(!0),Q.a.config.update({accessKeyId:x.aws.accessKey,secretAccessKey:x.aws.secretKey,region:x.aws.region});var n={SourceImage:{S3Object:{Bucket:e,Name:t}},TargetImage:{S3Object:{Bucket:e,Name:a}},SimilarityThreshold:70};(new Q.a.Rekognition).compareFaces(n,(function(e,t){o(!1),e?alert("You didn't upload exact personal photo."):t.FaceMatches.length?t.FaceMatches.forEach((function(e){var t=e.Similarity;o(!0),fetch(x.api.updateUserInfo,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:A,verify_result:t})}).then((function(e){return e.json()})).then((function(e){o(!1),e.status?fetch(x.api.sendResultMail,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:A,similarity:t})}).then((function(e){return e.json()})).then((function(e){e.status?(alert("verification success!"),b.push("/verifisuccess?token="+A)):alert("Error sending mail!.")})):alert("Error on verification!")})).catch((function(e){o(!1)}))})):alert("User and ID is not matched!")}))}};return r.a.createElement(s.a,null,r.a.createElement(g.a,{style:{textAlign:"center"}},a?r.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",textAlign:"center",backgroundColor:"rgba(16, 16, 16, 0.5)",zIndex:999}},r.a.createElement(V.a,{style:{textAlign:"center",marginTop:"30%"},animation:"border"})):null,r.a.createElement(y.a,{style:{justifyContent:"center"}},r.a.createElement("ul",{class:"progressbar"},r.a.createElement("li",{class:"active"},"Identity Verification"),r.a.createElement("li",null,"Photo Verification"),r.a.createElement("li",null,"Verification finished"))),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{style:{marginTop:50}},r.a.createElement(E.a,null,r.a.createElement("h1",null,"Step 2. Verify Your Information"))),r.a.createElement(T.a,null),r.a.createElement(y.a,{style:{marginTop:30}},r.a.createElement(E.a,null,r.a.createElement("h4",null,"Upload Your ID Card"),p?r.a.createElement("div",null,r.a.createElement(y.a,{style:{justifyContent:"center"}},r.a.createElement("img",{src:u,style:{marginBottom:6,alignSelf:"center",display:"inline-block"}})),r.a.createElement(y.a,{style:{justifyContent:"space-evenly"}},r.a.createElement(v.a,{style:{marginLeft:30,display:"inline-block"},variant:"warning",onClick:function(){return function(){Q.a.config.update({accessKeyId:x.aws.accessKey,secretAccessKey:x.aws.secretKey,region:x.aws.region});var e=new Q.a.S3({params:{Bucket:x.aws.bucket}}),t=D(u),a=S.id+"_id.jpg",n=new File([t],a),r={Key:n.name,ContentType:"image/jpeg",Body:n};I(.1),e.putObject(r,(function(e,t){I(0),e?alert(e&&e.message?e.message:"photo upload faild!"):(o(!0),fetch(x.api.updateUserInfo,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:A,verify_idcard:a})}).then((function(e){return e.json()})).then((function(e){o(!1),e.status?(w(e),F()):alert("photo upload faild!")})).catch((function(e){o(!1),alert("photo upload faild!")})))})).on("httpUploadProgress",(function(e){var t=parseInt(e.loaded/e.total*100);I(t)}))}()}},"Upload"),r.a.createElement(v.a,{variant:"primary",onClick:function(){return f(!1)}},"Retake Photo"))):r.a.createElement("div",null,r.a.createElement(q.a,{style:{display:"inline-block"},audio:!1,videoConstraints:te,screenshotFormat:"image/jpeg",ref:P}),r.a.createElement("p",null,r.a.createElement(v.a,{variant:"primary",onClick:function(){return function(){if(P&&P.current){var e=P.current.getScreenshot();if(!e)return void alert("Camera is not connected!!");d(e),f(!0)}}()}},"Take A Photo")))))),_>0&&r.a.createElement(X.a,{now:_,label:_+"%",animated:!0})))},re=function(){var e=Object(c.g)(),t=Object(n.useState)(),a=Object(B.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(),u=Object(B.a)(l,2),d=u[0],m=u[1],h=Object(c.h)().search,p=new URLSearchParams(h).get("token");Object(n.useEffect)((function(){f()}),[]);var f=function(){m(!0),fetch(x.api.getUser,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:p})}).then((function(e){return e.json()})).then((function(t){m(!1),t&&t.data&&t.data.token?(i(t.data),"verified"==t.data.id_verification_result?t.data.verify_result||e.push("/userphoto?token="+p):e.push("/verifyID?token="+p)):alert("User not found!.")})).catch((function(e){m(!1)}))};return r.a.createElement(s.a,null,r.a.createElement(g.a,{style:{textAlign:"center"}},d?r.a.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",textAlign:"center",backgroundColor:"rgba(16, 16, 16, 0.5)",zIndex:999}},r.a.createElement(V.a,{style:{textAlign:"center",marginTop:"30%"},animation:"border"})):null,r.a.createElement(y.a,{style:{justifyContent:"center"}},r.a.createElement("ul",{class:"progressbar"},r.a.createElement("li",{class:"active"},"Identity Verification"),r.a.createElement("li",{class:"active"},"Photo Verification"),r.a.createElement("li",{class:"active"},"Verification finished"))),r.a.createElement("div",{style:{paddingTop:200,paddingBottom:20}},r.a.createElement("h1",null,"Congratulation!, you have completed verification process")),r.a.createElement(v.a,{variant:"primary",onClick:function(){return window.open(o.social_link,"_blank")}},"Proceed to interview")))},oe=a(59),ie=a(134),le=a.n(ie),ce={width:1280,height:720,facingMode:"user"},se={width:1280,height:720,facingMode:{exact:"environment"}},ue=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(m.a)(this,a),n=t.call(this);var o=new URLSearchParams(e.location.search).get("token");if(!o)return window.location.href="/",Object(oe.a)(n);var i=parseInt(o.substr(-1))-8;o=o.substr(0,o.length-1),n.webcamRef=r.a.createRef(),n.state={userToken:o,authStep:i,verifyURL:x.siteUrl+x.api.verifyID+"?token="+o+"9",isPhotoTaken:!1,imageSrc:"",photo_source:"",photo_target:"",uploadedPhoto:"",uploadedId:"",blob:"",resultMsg:"",msgColor:"black",resultBtnStatus:0,uploadingProgress:0,showLoadingIcon:{display:"none"},apiTmr:0},n.photoCapture=n.photoCapture.bind(Object(O.a)(n)),n.photoTake=n.photoTake.bind(Object(O.a)(n)),n.comparePhoto=n.comparePhoto.bind(Object(O.a)(n)),n.navToVerify=n.navToVerify.bind(Object(O.a)(n));var l=n.getMobileOperatingSystem();return"Android"!=l&&"iOS"!=l||(ce=se),n}return Object(h.a)(a,[{key:"getMobileOperatingSystem",value:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":/JavaFX/.test(e)?"JavaFx":"unknown"}},{key:"componentDidMount",value:function(){var e=this,t=this.state.userToken;fetch(x.api.getUser,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:"mQXA8d7YQGsj5FLgDstt"})}).then((function(e){return e.json()})).then((function(t){t.status&&(t.status&&(e.state.photo_source=t.data.id+"_face.jpg",e.state.photo_target=t.data.id+"_id.jpg"),e.setState({uploadedPhoto:t.data.verify_photo,uploadedId:t.data.verify_idcard}))})).catch((function(e){window.location.href="/"})),clearInterval(this.state.apiTmr),t&&(this.state.apiTmr=setInterval((function(){e.state.uploadedId?clearInterval(e.state.apiTmr):fetch(x.api.getUser,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:"mQXA8d7YQGsj5FLgDstt"})}).then((function(e){return e.json()})).then((function(t){e.setState({uploadedPhoto:t.data.verify_photo,uploadedId:t.data.verify_idcard}),t.data.verify_idcard&&clearInterval(e.state.apiTmr)})).catch((function(e){window.location.href="/"}))}),3e3))}},{key:"photoTake",value:function(){var e=this.state.isPhotoTaken,t="";e||(t=this.webcamRef.current.getScreenshot())?(this.setState({isPhotoTaken:!e,imageSrc:t}),console.log("--------- imageSrc")):this.setState({msgColor:"red",resultMsg:"Camera is not connected!!",imageSrc:""})}},{key:"photoCapture",value:function(){var e=this,t=this.state,a=t.authStep,n=t.userToken,r=t.imageSrc,o=this.state,i=o.photo_source,l=o.photo_target;Q.a.config.update({accessKeyId:x.aws.accessKey,secretAccessKey:x.aws.secretKey,region:x.aws.region});var c=new Q.a.S3({params:{Bucket:x.aws.bucket}}),s=i;1===a&&(s=l),r=this.dataURItoBlob(r);var u=new File([r],s),d={Key:u.name,ContentType:"image/jpeg",Body:u};e.setState({msgColor:"black",resultMsg:"",uploadingProgress:.1}),c.putObject(d,(function(t,r){if(t)return alert(t.message),!1;var o={verify_photo:s};1===a&&(o={verify_idcard:s}),o.token=n,fetch(x.api.updateUserInfo,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(t){t.status&&(1===a?window.location.href="/idsuccess":(e.setState({msgColor:"black",resultMsg:"Uploading done."}),console.log("-------- uploaded: ",t),setTimeout((function(){e.setState({authStep:0,resultMsg:"",imageSrc:"",isPhotoTaken:!1,resultBtnStatus:0,uploadingProgress:0})}),1e3))),console.log("data",t.data)}))})).on("httpUploadProgress",(function(t){console.log("---- uploading progress: ",t),console.log("---- uploading progress: ",t.loaded/t.total*100);var a=parseInt(t.loaded/t.total*100);e.setState({uploadingProgress:a})}))}},{key:"navToVerify",value:function(){var e=this,t=this.state.userToken;this.setState({showLoadingIcon:{display:"inline-block"}}),fetch(x.api.getUser,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:t})}).then((function(e){return e.json()})).then((function(t){if(t.status){var a="";if(t.data.verify_idcard||(a="You didn't upload id card photo."),t.data.verify_photo||(a="You didn't upload face photo."),a)return void e.setState({msgColor:"red",resultMsg:a,showLoadingIcon:{display:"none"}});e.setState({photo_source:t.data.verify_photo,photo_target:t.data.verify_idcard}),e.comparePhoto()}else e.setState({msgColor:"red",resultMsg:"Server connection failed.",showLoadingIcon:{display:"none"}})}))}},{key:"dataURItoBlob",value:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r));return new Blob([new Uint8Array(n)],{type:a})}},{key:"comparePhoto",value:function(){var e=this,t=e.state,a=t.resultBtnStatus,n=t.userToken;if(a)e.setState({authStep:0,resultBtnStatus:0,showLoadingIcon:{display:"none"}});else{var r=x.aws.bucket,o=this.state,i=o.photo_source,l=o.photo_target;Q.a.config.update({accessKeyId:x.aws.accessKey,secretAccessKey:x.aws.secretKey,region:x.aws.region});var c=new Q.a.Rekognition,s={SourceImage:{S3Object:{Bucket:r,Name:i}},TargetImage:{S3Object:{Bucket:r,Name:l}},SimilarityThreshold:70};console.log("-- compare 0");try{c.compareFaces(s,(function(t,a){if(t)return console.log(t,t.stack),void e.setState({resultBtnStatus:1,msgColor:"red",resultMsg:"You didn't upload exact personal photo.",showLoadingIcon:{display:"none"}});a.FaceMatches.length?a.FaceMatches.forEach((function(t){t.Face.BoundingBox;var a=t.Similarity;fetch(x.api.updateUserInfo,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:n,verify_result:a})}).then((function(e){return e.json()})).then((function(t){t.status&&(console.log("-------- uploaded: ",t),fetch(x.api.sendResultMail,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:t.token,similarity:a})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.status?window.location.href=t.data:e.setState({resultBtnStatus:1,msgColor:"red",resultMsg:t.data,showLoadingIcon:{display:"none"}})}))),console.log("data",t.data)}))})):e.setState({resultBtnStatus:1,msgColor:"red",resultMsg:"User and ID is not matched!",showLoadingIcon:{display:"none"}})}))}catch(u){e.setState({resultBtnStatus:1,msgColor:"red",resultMsg:"You didn't upload exact personal photo."}),console.log(u)}}}},{key:"render",value:function(){var e=this.state.authStep;return r.a.createElement(g.a,{style:{textAlign:"center"}},r.a.createElement("div",null,r.a.createElement(y.a,{style:{marginTop:50}},r.a.createElement(E.a,null,r.a.createElement("h1",null,"Step 2. Verify Your Information"))),r.a.createElement(T.a,null),r.a.createElement(y.a,{style:{marginTop:30}},r.a.createElement(E.a,null,r.a.createElement("h4",null,"Your Face Photo"),r.a.createElement("img",{src:this.state.imageSrc,style:{marginBottom:6,display:this.state.isPhotoTaken?"inline-block":"none"}}),r.a.createElement(q.a,{style:{display:this.state.isPhotoTaken?"none":"inline-block"},videoConstraints:ce,screenshotFormat:"image/jpeg",ref:this.webcamRef}),r.a.createElement("p",null,r.a.createElement(v.a,{variant:"primary",onClick:this.photoTake},this.state.isPhotoTaken?"Retake Photo":"Take A Photo"),r.a.createElement(v.a,{style:{marginLeft:30,display:this.state.isPhotoTaken?"inline-block":"none"},variant:"primary",onClick:this.photoCapture},"Upload"))),0===e&&r.a.createElement(E.a,null,r.a.createElement("h4",null,"Your ID card"),r.a.createElement(le.a,{value:this.state.verifyURL,size:256,level:"Q",includeMargin:!0}),r.a.createElement("p",null,r.a.createElement("a",{href:this.state.verifyURL},this.state.verifyURL)),this.state.uploadedId?r.a.createElement("p",{style:{color:"red"}},"ID has been submitted."):r.a.createElement("p",null,"Please scan this link and upload id card on your phone."))),r.a.createElement(T.a,null),r.a.createElement(y.a,{style:{marginTop:30}},r.a.createElement(E.a,null,r.a.createElement(v.a,{variant:"primary",onClick:this.navToVerify},r.a.createElement("i",{style:this.state.showLoadingIcon,className:"fa fa-spinner fa-spin"}),"Verify Information"))),this.state.uploadingProgress>0&&r.a.createElement("div",null,r.a.createElement(y.a,{style:{marginTop:30}},r.a.createElement(E.a,null),r.a.createElement(E.a,null,r.a.createElement(X.a,{now:this.state.uploadingProgress,label:this.state.uploadingProgress+"%",animated:!0})),r.a.createElement(E.a,null)))),1===e&&r.a.createElement("div",null,r.a.createElement(y.a,{style:{marginTop:50}},r.a.createElement(E.a,null,r.a.createElement("h1",null,"Upload Your ID Card"))),r.a.createElement(T.a,null),r.a.createElement(y.a,{style:{marginTop:30}},r.a.createElement(E.a,null,r.a.createElement("img",{src:this.state.imageSrc,style:{marginBottom:6,display:this.state.isPhotoTaken?"inline-block":"none"}}),r.a.createElement(q.a,{style:{display:this.state.isPhotoTaken?"none":"inline-block"},videoConstraints:ce,screenshotFormat:"image/jpeg",ref:this.webcamRef}))),r.a.createElement(T.a,null),r.a.createElement(y.a,{style:{marginTop:30}},r.a.createElement(E.a,null,r.a.createElement("p",null,r.a.createElement(v.a,{variant:"primary",onClick:this.photoTake},this.state.isPhotoTaken?"Retake Photo":"Take A Photo"),r.a.createElement(v.a,{style:{marginLeft:30,display:this.state.isPhotoTaken?"inline-block":"none"},variant:"primary",onClick:this.photoCapture},"Upload")))),this.state.uploadingProgress>0&&r.a.createElement("div",null,r.a.createElement(y.a,{style:{marginTop:30}},r.a.createElement(E.a,null),r.a.createElement(E.a,null,r.a.createElement(X.a,{now:this.state.uploadingProgress,label:this.state.uploadingProgress+"%",animated:!0})),r.a.createElement(E.a,null)))),2===e&&r.a.createElement("div",null,r.a.createElement(y.a,{style:{marginTop:50}},r.a.createElement(E.a,null,r.a.createElement("h1",null,"Step 2. Verify Your Identity"))),r.a.createElement(T.a,null),r.a.createElement(y.a,{style:{marginTop:30}},r.a.createElement(E.a,null,r.a.createElement(v.a,{variant:"primary",onClick:this.comparePhoto},this.state.resultBtnStatus?"Upload again":"Verify")))),r.a.createElement(y.a,{style:{marginTop:30,marginBottom:30,color:this.state.msgColor}},r.a.createElement(E.a,null,this.state.resultMsg)),""!==this.state.blob&&r.a.createElement("img",{src:this.state.blob,alt:"blob"}))}}]),a}(r.a.Component),de=Object(c.j)(ue),me=function(e){var t=e.children,a=Object(l.a)(e,["children"]),n=localStorage.getItem("authToken");return r.a.createElement(c.b,Object.assign({},a,{render:function(e){var a=e.location;return n?t:r.a.createElement(c.a,{to:{pathname:"/login",state:{from:a}}})}}))};var he=function(){return r.a.createElement(s.a,null,r.a.createElement(u.a,{expand:"lg",variant:"light",bg:"light"},r.a.createElement(u.a.Brand,{href:"#"},"ID Authenticate"),r.a.createElement(d.a,{className:"mr-auto"})),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/success",children:r.a.createElement(k,null)}),r.a.createElement(c.b,{path:"/idsuccess",children:r.a.createElement(S,null)}),r.a.createElement(c.b,{path:x.api.verifyID,children:r.a.createElement(W,null)}),r.a.createElement(c.b,{path:"/submit",children:r.a.createElement(U,null)}),r.a.createElement(c.b,{path:"/login",children:r.a.createElement(J,null)}),r.a.createElement(me,{path:"/admin/update/:id",children:r.a.createElement(Y,null)}),r.a.createElement(me,{path:"/admin",children:r.a.createElement(R,null)}),r.a.createElement(c.b,{path:"/userphoto",children:r.a.createElement(ee,null)}),r.a.createElement(c.b,{path:"/userid",children:r.a.createElement(ne,null)}),r.a.createElement(c.b,{path:"/verifisuccess",children:r.a.createElement(re,null)}),r.a.createElement(c.b,{path:"/idauth",children:r.a.createElement(de,null)}),r.a.createElement(c.b,{path:"/",children:r.a.createElement(C,null)})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t){}},[[137,1,2]]]);
//# sourceMappingURL=main.29960c07.chunk.js.map